{# @var \HeimrichHannot\FlareBundle\View\InteractiveView flare_list #}
{% extends '@Contao/flare/_flare_base.html.twig' %}

{% block content %}

    {#
        set my_list_spec = flare_make_list({
            dc: 'tl_news',
            form_name: 'lieselotte',
            items_per_page: 10,
        })

        my_list_spec.filters.add(flare_make_filter('eq', { id: 20 }))

        set my_view = flare_project('interactive', my_list_spec, {});

        my_view.form.createView
        my_view.entries
        my_view.paginator
    #}

    {% block content_start %}{% endblock %}

    {% block filter %}

        {% set form = flare_list.form.createView %}

        {{ form_start(form) }}
            {{ form_widget(form) }}
            <button type="submit" class="btn btn-primary">{{ 'submit'|trans({}, 'flare_form') }}</button>
        {{ form_end(form) }}

    {% endblock %}

    {% block list %}

        <hr>

        <div style="color: #800; background: #fdd; padding: 1rem; margin-bottom: 1rem;">
            <strong>{{ 'list.default_template.warning'|trans({}, 'flare') }}</strong>
            <br><small>{{ 'list.default_template.description'|trans({}, 'flare') }}</small>
        </div>

        {% if app.request.get('_preview') or app.debug %}
            {% for entry in flare_list.entries %}
                <details>
                    <summary>#{{ entry.id }} <a href="{{ flare_list.to(entry.id) }}">{{ entry.title ?? entry.email ?? entry.alias ?? ('<' ~ loop.index ~ '>') }}</a></summary>
                    <div style="width: 100%; max-height: max(30vh, 150px); overflow: auto auto; background: #def; margin-bottom: .5rem">
                        {% set model = flare_list.model(entry.id) %}
                        <div style="display: grid; grid-template-columns: max-content auto; gap: .125rem 1rem; font-family: monospace; padding: .5rem 1rem 3rem; font-size: .9em;">
                            <strong style="grid-column: 1 / -1; margin-bottom: .25rem">{{ model.table }}</strong>
                            {% for key, field in entry %}
                                {% if key not in ['password'] %}
                                    <div>{{ key }}</div>
                                    <div>{{ field|default('-') }}</div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </details>
            {% endfor %}
        {% endif %}

        <hr>

    {% endblock %}

    {% block pagination %}
        {# @var \HeimrichHannot\FlareBundle\Paginator\Paginator paginator #}
        {{ include('@Contao/flare/paginator.html.twig', { paginator: flare_list.paginator, use_default_styles: true }) }}
    {% endblock %}

    {% block content_end %}{% endblock %}

{% endblock %}
